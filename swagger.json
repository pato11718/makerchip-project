{
  "swagger": "2.0",
  "info": {
    "title": "Makerchip-project",
    "description": "API back para la plataforma de makerchip.",
    "version": "1.0.0"
  },
  "host": "167.99.15.99:3000",
  "basePath": "/api",
  "schemes": [
    "http"
  ],
  "paths": {
    "/login/github": {
      "get": {
        "summary": "Login con github.",
        "description": "Login con github e installacion de github App para los webhook.",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/repository": {
      "get": {
        "summary": "Regresa todos los repositorios.",
        "description": "Regresa todos los repositorios registrados en mongo por las personas que hicieron login.",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/projects/{id}": {
      "get": {
        "summary": "regresa el detalle de un repo por su ID.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "type": "integer",
            "minimum": 1,
            "description": "Id del repo."
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/getMyRepo": {
      "get": {
        "summary": "Regresa solo los repositorios del usuario logeado.",
        "parameters": [
          {
            "in": "header",
            "name": "Authorization",
            "required": true,
            "type": "string",
            "description": "Token de usuario para github."
          }
        ],
        "description": "Regresa solo los repositorios del usuario logeado con el token",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/addLove/{id}": {
      "get": {
        "summary": "Agregar me gusta a repositorio",
        "parameters": [
          {
            "in": "header",
            "name": "Authorization",
            "required": true,
            "type": "string",
            "description": "Token de usuario para github."
          },
          {
            "in": "path",
            "name": "id",
            "required": true,
            "type": "integer",
            "minimum": 1,
            "description": "Id del repo."
          }
        ],
        "description": "Agregar me gusta a repositorio",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/addComment": {
      "post": {
        "summary": "Agregar comentario de un repositorio",
        "parameters": [
          {
            "in": "header",
            "name": "Authorization",
            "required": true,
            "type": "string",
            "description": "Token de usuario para github."
          },
          {
            "in": "body",
            "name": "data",
            "required": true,
            "type": "object",
            "description": "Objeto del comentario"
          }
        ],
        "description": "Agregar comentario de un repositorio",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/Comment"
            }
          }
        }
      }
    },
    "/getComment/{id}": {
      "get": {
        "summary": "Regresa los comentarios registrados del repositorio",
        "parameters": [
          {
            "in": "header",
            "name": "Authorization",
            "required": true,
            "type": "string",
            "description": "Token de usuario para github."
          },
          {
            "in": "path",
            "name": "id",
            "required": true,
            "type": "integer",
            "minimum": 1,
            "description": "Id del repo."
          }
        ],
        "description": "Regresa los comentarios registrados del repositorio",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/getChildComment/{id}": {
      "get": {
        "summary": "Regresa los Sub-comentarios registrados del repositorio",
        "parameters": [
          {
            "in": "header",
            "name": "Authorization",
            "required": true,
            "type": "string",
            "description": "Token de usuario para github."
          },
          {
            "in": "path",
            "name": "id",
            "required": true,
            "type": "integer",
            "minimum": 1,
            "description": "Id del repo."
          }
        ],
        "description": "Regresa los Sub-comentarios registrados del repositorio",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/createRepository": {
      "post": {
        "summary": "Crear un repositorio en github",
        "parameters": [
          {
            "in": "header",
            "name": "Authorization",
            "required": true,
            "type": "string",
            "description": "Token de usuario para github."
          },
          {
            "in": "body",
            "name": "data",
            "required": true,
            "type": "object",
            "description": "nombre del repositorio con el que se va crear el repositorio en github"
          }
        ],
        "description": "Crear un repositorio en github",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/CreateRepo"
            }
          }
        }
      }
    },
    "/createFile": {
      "put": {
        "summary": "Crear archivo en un repositorio",
        "parameters": [
          {
            "in": "header",
            "name": "Authorization",
            "required": true,
            "type": "string",
            "description": "Token de usuario para github."
          },
          {
            "in": "body",
            "name": "data",
            "required": true,
            "type": "object",
            "description": "objeto con la informacion necesaria para crear un archivo en un repositorio"
          }
        ],
        "description": "Crear archivo en un repositorio",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/createFileRepo"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "Comment": {
      "properties": {
        "idRepo": {
          "type": "integer"
        },
        "parent_id": {
          "type": "string"
        },
        "comment": {
          "type": "string"
        }
      },
      "required": [
        "idRepo",
        "parent_id",
        "comment"
      ]
    },
    "CreateRepo": {
      "properties": {
        "name_repo": {
          "type": "string"
        }
      },
      "required": [
        "name_repo"
      ]
    },
    "createFileRepo": {
      "properties": {
        "message": {
          "type": "string"
        },
        "path": {
          "type": "string"
        },
        "repo": {
          "type": "string"
        },
        "owner": {
          "type": "string"
        },
        "content": {
          "type": "string"
        }    
      },
      "required": [
        "message",
        "path",
        "repo",
        "owner",
        "content"
      ]
    }
  }
}